# FigmaForge Asset Upload Pipeline

*Generated by AI Assistant on 2026-02-24*

## The Decal vs. Image ID Problem
Historically, Roblox used `Decal` IDs representing a web container, inside which the actual `Image` ID is stored in the XML structure. FigmaForge previously uploaded `Decals` because the Open Cloud API prioritized it, but it resulted in a severe compression issue.

Using `rbxthumb://type=Asset&id=DECAL_ID` enforces a maximum resolution of 420x420, making UI look drastically blurry compared to Figma.

## The Solution: Direct Image Uploads
We resolved this by altering the payload inside `figma-forge-images.ts` to directly create an Asset of type `Image` instead of `Decal`.

```typescript
const payload = {
  assetType: 'Image', // Changed from 'Decal'
  displayName: displayName,
  description: 'Uploaded by FigmaForge',
  creationContext: {
    creator: { groupId: String(creatorId) }
    // Or userId: String(creatorId) if uploading to a user profile
  }
};
```

This returns the **true Image ID**, which we can directly embed in `.rbxmx` XML as `rbxassetid://IMAGE_ID`.

## Why It Matters
By bypassing `rbxthumb` and direct Decal linking, the Roblox engine renders the UI strictly at its uploaded resolution, preventing the 420x420 downsampling.

## Common Pitfall: HTTP 404 on Uploads
If the API returns a `404 Not Found` with the message `Creator User XXXXX is not found.`, it means the `.env` `ROBLOX_CREATOR_ID` does not match the authentication cookie/API key. **Always double-check that the `creatorId` matches the owner of the API Key.**
